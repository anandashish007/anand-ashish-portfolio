document.addEventListener("DOMContentLoaded", () => {

  const profile  = document.getElementById("profile");
  const caption  = document.getElementById("caption");
  const loader   = document.getElementById("loader");
  const taskbar  = document.getElementById("taskbar");
  const greeting = document.getElementById("greeting");
  const bg       = document.querySelector(".background");
  const about    = document.getElementById("about");
  const aboutBtn = document.getElementById("aboutBtn");
  const homeBtn  = document.getElementById("homeBtn");
  const intro    = document.getElementById("intro");

  /* GREETING */
  const h = new Date().getHours();
  greeting.textContent =
    h < 12 ? "GOOD MORNING" :
    h < 17 ? "GOOD AFTERNOON" :
    "GOOD EVENING";

  /* INTRO SEQUENCE */
  setTimeout(() => {

    loader.classList.add("hide");

    // 1) Profile and caption intro
    setTimeout(() => profile.classList.add("show"), 200);   // starts
    setTimeout(() => caption.classList.add("show"), 350);   // starts

    // 2) Wait until both intro transitions finish (0.9s max),
    //    then start hero move
    const introDuration = 900; // ms
    setTimeout(() => {
      intro.classList.add("moveIntro");  // move to top-left
      profile.classList.add("move");     // shrink / adjust circle
    }, 350 + introDuration + 150);       // caption delay + anim + small buffer

    // 3) AFTER hero move begins, fade caption out if you want
    setTimeout(() => {
      caption.classList.add("hide");
    }, 350 + introDuration + 150 + 400); // starts disappearing while already in hero

    // 4) Background, greeting and taskbar
    setTimeout(() => {
      bg.classList.add("bg-clear");
      greeting.classList.add("show");
    }, 350 + introDuration + 150 + 400 + 200);

    setTimeout(() => taskbar.classList.add("show"),
      350 + introDuration + 150 + 400 + 500
    );

  }, 800);

  /* ABOUT OPEN/CLOSE */
  let opened = false;

  aboutBtn.onclick = () => {
    opened = !opened;
    about.classList.toggle("show", opened);
    bg.classList.toggle("bg-about", opened);
    greeting.classList.toggle("blur", opened);
  };

  homeBtn.onclick = () => {
    opened = false;
    about.classList.remove("show");
    bg.classList.remove("bg-about");
    greeting.classList.remove("blur");
  };

});
